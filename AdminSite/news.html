<!DOCTYPE html>
<html lang="en">
<head>
  <title>News</title>
  <link rel="icon" href="logo.png">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
<script src = "socket.io/socket.io.js"></script>
<script src = "http://code.jquery.com/jquery-1.7.1.min.js"></script>

<nav class="navbar navbar-inverse role=navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="index.html">Administrator</a>
    </div>
    <ul class="nav navbar-nav">
      <li><a href="index.html">Main Menu</a></li>
      <li class="active"><a href="#">News</a></li>
      <li><a href="alerts.html">Alerts</a></li>
      <li><a href="map.html">Map</a></li>
      <li><a href="stats.html">Residents Status</a></li>
    </ul>
    <a class="navbar-brand pull-right" href="signin.html">Log Out</a>
  </div>
</nav>

<div class="container">
  <h3>News</h3>
  <p>Current News</p>
</div>





<table class="table" id="myTable" width="200">
  <thead>
    <tr class = "something">
      <th class="col-md-2">News ID</th>
      <th class="col-md-2">Author</th>
      <th class="col-md-2">Date</th>
      <th class="col-md-6">Headline</th>
      <th class="col-md-6">Text</th>
    </tr>
  </thead>
</table>


<script>

var socket = io.connect('http://localhost');

socket.on('notification', function(data)
{
$('#container').html(data.sample);
});

</script>



  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"></script>

  <script>

    AWS.config.update({
      region: "us-east-1",
      endpoint: 'https://dynamodb.us-east-1.amazonaws.com',
      accessKeyId: "AKIAI43SMJUCJP57ATWA",
      secretAccessKey: "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"
    });

    var dynamodb = new AWS.DynamoDB();
    var docClient = new AWS.DynamoDB.DocumentClient();
    var editID = -1;

    function createTable() {
      var table = document.getElementById("myTable");

      var params = {
        TableName : "News"
      };

      docClient.scan(params, function(err, data) 
      {
        if (err) {
            alert("Error: " + JSON.stringify(err, undefined, 2));
        } else {
	    var j = 1;
            data.Items.forEach(function(item) {
		var row = table.insertRow(j);

		var cells = [];
		for(var i = 0; i < 5; i++) {
			var cell = row.insertCell(i)
			cell.id = "N" + j + "" + i;
			cells.push(cell);
		}	
		cells[0].innerHTML = item.Nid;
		cells[1].innerHTML = item.author_fname + " " + item.author_lname;
		cells[2].innerHTML = item.news_date;
		cells[3].innerHTML = item.news_headline;
		cells[4].innerHTML = item.news_text;
		j++;
            });
        }
      });
    }

    createTable();
  </script>

</body>
</html>
